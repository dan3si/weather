(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{137:function(e,t,a){"use strict";a.r(t);var c=a(3),n=a(0),r=a.n(n),i=a(17),s=a.n(i),o=a(95),u=a(9),d=a(25),p=a(33),h=a.n(p),l=a(54),j=a(39),m="71a7339a3b81eee30891bc5de01ba1a1",b="&client_id=ab3411e4ac868c2646c0ed488dfd919ef612b04c264f3374c97fff98ed253dc9",_=a(97),O=a(150),y=a(152),x=a(153),f=a(151),g=a(35),w=a.n(g),v=a(92),D=a(98),C={ADD_CITY:"ADD_CITY",ADD_LOCATION:"ADD_LOCATION",ADD_LANG:"ADD_LANG"},M=Object(v.a)((function(e,t){switch(t.type){case C.ADD_CITY:return Object(d.a)(Object(d.a)({},e),{},{cities:[].concat(Object(D.a)(e.cities),[t.city])});case C.ADD_LOCATION:return Object(d.a)(Object(d.a)({},e),{},{location:t.location});case C.ADD_LANG:return Object(d.a)(Object(d.a)({},e),{},{lang:t.lang});default:return e}}),{cities:[],location:void 0,lang:void 0}),I=function(e){return{type:C.ADD_CITY,city:e}},N=function(e){return{type:C.ADD_LANG,lang:e}},A=function(e){var t=e.history,a=Object(n.useState)({city:"",country:"",cityImage:"",description:"",temperature:"",icon:""}),r=Object(j.a)(a,2),i=r[0],s=r[1],o=Object(n.useState)([]),u=Object(j.a)(o,2),p=u[0],g=u[1],v=Object(n.useState)(!0),D=Object(j.a)(v,2),A=D[0],S=D[1];return Object(n.useEffect)(Object(l.a)(h.a.mark((function e(){var t,a,c,n,r,i,o,u,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,M.getState().cities.find((function(e){var t;return e.data.name.toLowerCase()===(null===(t=M.getState().location)||void 0===t?void 0:t.toLowerCase())}))&&M.getState().location){e.next=24;break}return e.next=4,fetch("http://api.sypexgeo.net/");case 4:return a=e.sent,e.next=7,a.json();case 7:return c=e.sent,n=c.country.iso,e.next=11,fetch("http://api.openweathermap.org/data/2.5/weather?q=".concat(c.country.capital_en,"&lang=").concat(n,"&appid=").concat(m));case 11:return r=e.sent,e.next=14,r.json();case 14:return i=e.sent,e.next=17,fetch("https://api.unsplash.com/search/photos?page=1&query=".concat(c.country.capital_en).concat(b));case 17:return o=e.sent,e.next=20,o.json();case 20:u=e.sent,M.dispatch((p=i.name,{type:C.ADD_LOCATION,location:p})),M.dispatch(N(n)),M.dispatch(I({data:i,image:null===(t=u.results[0])||void 0===t?void 0:t.urls.regular}));case 24:d=M.getState().cities.find((function(e){return e.data.name.toLowerCase()===M.getState().location.toLowerCase()})),s({city:d.data.name,country:d.data.sys.country.toLowerCase(),cityImage:d.image,description:d.data.weather[0].description[0].toUpperCase()+d.data.weather[0].description.slice(1),temperature:Math.round(d.data.main.temp-273.15),icon:"http://openweathermap.org/img/w/".concat(d.data.weather[0].icon,".png")}),S(!1),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),alert(e.t0);case 32:case"end":return e.stop()}var p}),e,null,[[0,29]])}))),[]),Object(c.jsxs)("div",{className:w.a.container,children:[Object(c.jsxs)("div",{className:w.a.city,children:[i.city,Object(c.jsx)(O.a,{name:i.country})]}),Object(c.jsxs)("div",{className:w.a.weather,children:[Object(c.jsx)("div",{className:w.a.description,children:i.description}),Object(c.jsx)("div",{className:w.a.temperature,children:i.temperature}),Object(c.jsx)("img",{src:i.icon,className:w.a.weatherIcon})]}),Object(c.jsx)(y.a,{image:i.cityImage,header:i.city,meta:(new Date).toTimeString().slice(0,5),extra:Object(c.jsx)(_.a,{className:w.a.search,options:p,onChange:function(e){return t.push("/cities/".concat(e.value))},onInputChange:function(e){Object(l.a)(h.a.mark((function t(){var a,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/cities?query=".concat(e));case 2:return a=t.sent,t.next=5,a.json();case 5:c=t.sent,g(c);case 7:case"end":return t.stop()}}),t)})))()},placeholder:"Search",noOptionsMessage:function(){return"No matching results"},styles:{valueContainer:function(e){return Object(d.a)(Object(d.a)({},e),{},{cursor:"text"})}}}),fluid:!0}),A&&Object(c.jsx)(x.a,{active:!0,children:Object(c.jsx)(f.a,{children:"Loading"})})]})},S=function(e){var t=e.history;return Object(c.jsx)(A,{history:t})},L=a(26),k=a.n(L),T=function(e){var t=e.match,a=e.history,r=Object(n.useState)({city:"",country:"",cityImage:"",description:"",temperature:"",icon:""}),i=Object(j.a)(r,2),s=i[0],o=i[1],u=Object(n.useState)(!0),d=Object(j.a)(u,2),p=d[0],_=d[1];return Object(n.useEffect)(Object(l.a)(h.a.mark((function e(){var a,c,n,r,i,s,u,d,p;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=+t.params.cityID,M.getState().lang){e.next=10;break}return e.next=5,fetch("http://api.sypexgeo.net/");case 5:return c=e.sent,e.next=8,c.json();case 8:n=e.sent,M.dispatch(N(n.country.iso));case 10:if(M.getState().cities.find((function(e){return e.data.id===a}))){e.next=24;break}return e.next=13,fetch("http://api.openweathermap.org/data/2.5/weather?id=".concat(a,"&lang=").concat(M.getState().lang,"&appid=").concat(m));case 13:return i=e.sent,e.next=16,i.json();case 16:return s=e.sent,e.next=19,fetch("https://api.unsplash.com/search/photos?page=1&query=".concat(s.name).concat(b));case 19:return u=e.sent,e.next=22,u.json();case 22:d=e.sent,M.dispatch(I({data:s,image:null===(r=d.results[0])||void 0===r?void 0:r.urls.regular}));case 24:p=M.getState().cities.find((function(e){return e.data.id===a})),o({city:p.data.name,country:p.data.sys.country.toLowerCase(),cityImage:p.image,description:p.data.weather[0].description[0].toUpperCase()+p.data.weather[0].description.slice(1),temperature:Math.round(p.data.main.temp-273.15),icon:"http://openweathermap.org/img/w/".concat(p.data.weather[0].icon,".png")}),_(!1),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),alert(e.t0);case 32:case"end":return e.stop()}}),e,null,[[0,29]])}))),[]),Object(c.jsxs)("div",{className:k.a.container,children:[Object(c.jsxs)("div",{className:k.a.header,children:[Object(c.jsx)("button",{className:k.a.backButton,onClick:function(){return a.push("/")}}),Object(c.jsx)("div",{className:k.a.city,children:s.city}),Object(c.jsx)(O.a,{name:s.country,className:k.a.flag})]}),Object(c.jsx)(y.a,{image:s.cityImage,header:s.city,meta:(new Date).toTimeString().slice(0,5),extra:Object(c.jsxs)("div",{className:k.a.weather,children:[Object(c.jsx)("div",{className:k.a.description,children:s.description}),Object(c.jsx)("div",{className:k.a.temperature,children:s.temperature}),Object(c.jsx)("img",{src:s.icon,className:k.a.weatherIcon})]}),fluid:!0}),p&&Object(c.jsx)(x.a,{active:!0,children:Object(c.jsx)(f.a,{children:"Loading"})})]})},B=function(e){var t=e.match,a=e.history;return Object(c.jsx)(T,{match:t,history:a})};a(135);var J=function(){return Object(c.jsxs)(o.a,{children:[Object(c.jsx)(u.a,{path:"/",exact:!0,component:S}),Object(c.jsx)(u.a,{path:"/cities/:cityID",exact:!0,component:B})]})};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(J,{})}),document.getElementById("root"))},26:function(e,t,a){e.exports={container:"CityModule_container__39Jag",header:"CityModule_header__2fFJn",backButton:"CityModule_backButton__3y45J",city:"CityModule_city___sS3I",time:"CityModule_time__29JRV",weather:"CityModule_weather__1tvL9",description:"CityModule_description__-fVVT",temperature:"CityModule_temperature__3UODO",weatherIcon:"CityModule_weatherIcon__2tgNt"}},35:function(e,t,a){e.exports={container:"MainModule_container__35_hB",city:"MainModule_city__1Vx9D",time:"MainModule_time__eVv3T",weather:"MainModule_weather__1Bswl",description:"MainModule_description__X8kKQ",temperature:"MainModule_temperature__34-Im",search:"MainModule_search__3qep8",weatherIcon:"MainModule_weatherIcon__2hdPB"}}},[[137,1,2]]]);
//# sourceMappingURL=main.73073cbe.chunk.js.map